<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PH Emergency Finder</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&libraries=places"></script>
  <style>
    body {
      background: linear-gradient(to bottom right, #dbeafe, #fef9c3);
    }
  </style>
</head>
<body class="font-sans text-gray-800">
  <header class="bg-blue-500 text-white text-center p-4 shadow-md">
    <h1 class="text-2xl font-bold">üö® PH Emergency Finder</h1>
    <p class="text-sm">Your quick-access guide to help, wherever you are.</p>
  </header>

  <main class="p-4">
    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">üìû Emergency Hotlines (Philippines)</h2>
      <ul class="list-disc pl-5">
        <li><strong>911</strong> ‚Äì National Emergency</li>
        <li><strong>143</strong> ‚Äì Philippine Red Cross</li>
        <li><strong>(02) 894-26843</strong> ‚Äì PNP</li>
        <li><strong>(02) 8722-0650</strong> ‚Äì Bureau of Fire Protection</li>
        <li><strong>117</strong> ‚Äì NDRRMC</li>
      </ul>
    </section>

    <section class="mb-6">
      <h2 class="text-xl font-semibold mb-2">üè• Nearest Clinics & Hospitals</h2>
      <button onclick="findHospitals()" class="bg-blue-600 text-white px-4 py-2 rounded shadow hover:bg-blue-700">
        Find Nearby Facilities
      </button>
      <div id="map" class="mt-4 rounded shadow h-64"></div>
    </section>

    <section>
      <h2 class="text-xl font-semibold mb-2">ü§ñ Emergency Assistant</h2>
      <textarea id="userQuery" placeholder="Ask something like 'What do I do if someone faints?'" class="w-full p-2 border rounded mb-2"></textarea>
      <button onclick="askGPT()" class="bg-green-600 text-white px-4 py-2 rounded shadow hover:bg-green-700">
        Ask AI Assistant
      </button>
      <div id="gptResponse" class="mt-3 p-3 bg-white rounded shadow text-sm"></div>
    </section>
  </main>

  <footer class="text-center text-xs text-gray-600 p-4 mt-6">
    Made with ‚òï by G
  </footer>

  <script>
    function findHospitals() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(pos => {
          const lat = pos.coords.latitude;
          const lng = pos.coords.longitude;
          const map = new google.maps.Map(document.getElementById("map"), {
            center: { lat, lng },
            zoom: 15
          });
          const service = new google.maps.places.PlacesService(map);
          service.nearbySearch({
            location: { lat, lng },
            radius: 3000,
            type: ['hospital', 'clinic']
          }, (results, status) => {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
              results.forEach(place => {
                new google.maps.Marker({
                  position: place.geometry.location,
                  map: map,
                  title: place.name
                });
              });
            }
          });
        });
      } else {
        alert("Geolocation is not supported by your browser.");
      }
    }

    async function askGPT() {
      const userInput = document.getElementById("userQuery").value;
      const outputDiv = document.getElementById("gptResponse");
      outputDiv.textContent = "Thinking...";

      const res = await fetch("https://api.openai.com/v1/chat/completions", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer YOUR_OPENAI_API_KEY"
        },
        body: JSON.stringify({
          model: "gpt-3.5-turbo",
          messages: [
            { role: "system", content: "You are a helpful emergency assistant." },
            { role: "user", content: userInput }
          ]
        })
      });

      const data = await res.json();
      outputDiv.textContent = data.choices[0].message.content;
    }
  </script>
</body>
</html>
